extends ../layout

block content
    div
        div.col-sm-12.text-center(style="margin:0 auto;")
            h2
            h2(style="display:inline;") Search For Keyword
            br
            br
            div(style="margin: 0 auto;")
                form(action='/search', method='POST')
                    input(type='hidden', name='_csrf', value=_csrf)
                    input.form-control(style="margin: 0 auto;width:400px" type='search', name='search', id='search')
                    br
                    button.btn-lg.btn.btn-primary(type='submit' style="margin-right:10px" name="type" value="upload")
                        //i.fa.fa-lock
                        | Search For Media

                    button.btn-lg.btn.btn-primary(type='submit' style="margin-left:10px" name="type" value="user")
                        //i.fa.fa-lock
                        | Search For User



        // UPLOADS RESULTS
        br
        div.col-sm-12.text-center(style="margin:0 auto;margin-top:50px;")
            if uploads
                if uploads.length > 0
                    p(style="text-decoration:underline;font-size:20px;") #{uploads.length} Results

                    div.text-center.center-div

                        div.dropdown(style="display:inline;margin-right:15px;")
                            button.btn.btn-primary.dropdown-toggle(type='button', data-toggle='dropdown' style="border-radius:5px")
                                //| Order By: #{orderByEnglishString} &nbsp
                                | Order By: thing &nbsp

                                span.caret

                            ul.dropdown-menu.dropdown
                                li
                                //    a(href=`/user/${channel.channelUrl}?orderBy=popular`) Popular
                                //li
                                //    a(href=`/user/${channel.channelUrl}?orderBy=newToOld`) New To Old
                                //li
                                //    a(href=`/user/${channel.channelUrl}?orderBy=oldToNew`) Old To New

                        include ../viewPartials/mediaDropdown

                        include ../viewPartials/sensitivityFilterDropdown
                    br
                    br

                    each upload in uploads
                      if upload.uploader
                          div.col-sm-4(style="text-align:center;height:360px")
                              include ../viewPartials/uploadThumbnail

                              include ../viewPartials/uploadDetails
                else
                    div.center-block.text-center
                        br
                        br
                        p(style="font-size:20px") No Results Found


        // USERS RESULTS
        div.col-sm-12.text-center(style="margin:0 auto;")
            if channels
                if channels.length > 0
                    p(style="text-decoration:underline;font-size:20px;")  Results
                    each channel in channels
                        div.col-sm-4(style="text-align:center;height:360px")
                            a(href=`/user/${channel.channelUrl}` style="color:black")
                                if channel.thumbnailUrl
                                    img.preview-image(src=channel.thumbnailUrl)
                                else if channel.uploads && channel.uploads[0]
                                    img.preview-image(src=channel.uploads[0].thumbnailUrl)
                                else
                                    img.preview-image(src='/no_img.png')


                                div
                                    p.upload-title-text Channel Username: #{channel.channelUrl}
                                    p.upload-title-text Channel Name: #{channel.channelName}
                                br

                            div.upload-details
                                div.views
                                    p.views-text #{channel.uploads.length} Uploads

                else
                    div.center-block.text-center
                        br
                        br
                        p(style="font-size:20px") No Results Found


    include ../viewPartials/changeSensitivityFilterJs